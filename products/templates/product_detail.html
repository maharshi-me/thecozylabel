{% extends 'base.html' %}

{% block content %}
<style>
{% for color in product.colors.all %}
.color-{{forloop.counter}}{
    background-color: {{color.colorcode}};
    border:1px solid grey;
}

{% endfor %}


</style>

  <!--Main layout-->
  <main class="mt-3">
    <div class="container mt-5">

      <!--Grid row-->
      <div class="row wow fadeIn">

        <!--Grid column-->
        <div class="col-md-6 mb-4">

        <a href="{{product.image.url}}" data-lightbox="example-set" data-title="{{product.title}}">
          <img class="card-img-top" src="{{product.image.url}}" alt="item-pic"/>
        </a>
        
            

          <div class='row'>
            {% if product.image_1 %}
            <div class='col-md-4 col-sm-4 col-4'>
              <div class="product-img zoom">
                <a href="{{product.image_1.url}}" data-lightbox="example-set" data-title="{{product.title}}">
                  <img class="card-img-top" src="{{product.image_1.url}}" alt="item-pic"/>
                </a>
              </div>
            </div>
            {% endif %}
            {% if product.image_2 %}
            <div class='col-md-4 col-sm-4 col-4'>
              <div class="product-img zoom">
                <a href="{{product.image_2.url}}" data-lightbox="example-set" data-title="{{product.title}}">
                  <img class="card-img-top" src="{{product.image_2.url}}" alt="item-pic"/>
                </a>
              </div>
            </div>
            {% endif %}
            {% if product.image_3 %}
            <div class='col-md-4 col-sm-4 col-4'>
              <div class="product-img zoom">
                <a href="{{product.image_3.url}}" data-lightbox="example-set" data-title="{{product.title}}">
                  <img class="card-img-top" src="{{product.image_3.url}}" alt="item-pic"/>
                </a>
              </div>
            </div>
            {% endif %}
            
            {% if product.image_4 %}
            <div class='col-md-4 col-sm-4 col-4'>
              <div class="product-img zoom">
                <a href="{{product.image_4.url}}" data-lightbox="example-set" data-title="{{product.title}}">
                  <img class="card-img-top" src="{{product.image_4.url}}" alt="item-pic"/>
                </a>
              </div>
            </div>
            {% endif %}
          </div>
          

        </div>

        <!--Grid column-->

        <!--Grid column-->
        <div class="col-md-6 mb-4">
          <div class='row'>
            <div class=''>

          <!--Content-->
              <div class="p-4">
                <form action="{% url 'products:add_to_cart' %}" id='form1' method='POST'>

                {% csrf_token %}


                  <input type='hidden' name='pk' value='{{product.pk}}'>
                  <div class='title-font-d'>

                  {{product.title}}
                  </div>

                  <p class="lead">
                    <span class="font-weight-bold">
                          {% if product.discount_price %}
                          <span class="money-d"><strong>₹ {{product.discount_price|floatformat:0}}</strong></span>
                          
                      
                          <span class='money-strike-d'><s>₹ {{product.price|floatformat:0}}</s></span>

                          <span style='color:red;'><small>{{product.get_discount_percentage}} % discount</small></span>
                          
                          {% else %}
                          <span class="money-d"><strong>₹ {{product.price|floatformat:0}}</strong></span>
                
                          {% endif %}
                    </span>
                    <small><br>(Inclusive of all taxes.)</small>
                  </p>

                  
                  
                  <div class='form-group size' id='size'>
                    <div class='label-size'>Select Size: <span id='size-label'></span>
                    
                    </div>
                  </div>
                  <div>
                    {% for size in product.sizes %}
                      <a class="al">{{size}}</a>
                    {% endfor %}
                  </div>

                  

                  <div class='mt-3'>
                      <label for='qty' class='label-size'>Qty:</label>
                  </div>
                    
                  <div class='mb-4'>
                    <input class='form-control' style='width:50px;' type="number" id="qty" name="quantity" min="1" max='99'
                      value="1" required>
                  </div>
                  
                  


                  
                  <button type='submit' class="btn btn-primary btn-md my-0 p">
                          Add to cart
                        <i class="fas fa-shopping-cart ml-1"></i>
                  </button>

                </form>


          
              </div>
          <!--Content-->
            </div>
            
          </div>

        </div>
        <!--Grid column-->

        <div class='container'>
          <label class='label-size'>Description</label>
          <p>{{product.description}}</p>
        </div>

        <div class='container'>
          <label class='label-size'>Style</label>
          <p>{{product.style}}</p>
        </div>
        <div class='container'>
          <label class='label-size'>Fabric</label>
          <p>{{product.fabric}}</p>
        </div>
        <div class='container'>
          <label class='label-size'>Delivery & Return Policy</label>
          <p>{{product.policy}}</p>
        </div>

      </div>
      <!--Grid row-->

      <hr>

    </div>
  </main>
  <!--Main layout-->
{% endblock content %}


{% block script %}


<script>
  var size='Nn';
  var sp = 0;

    $(".al").click(function(e){
      $(".al").removeClass("al-active")
      $(this).addClass("al-active")
      size = $(this).html()
      $('#size-label').html(size)
    })
    $(document).on('submit', '#form1', function (e) {
      if (size=='Nn'){
        $('#size-label').html('Please select size!')
        sp = 0
      }
      else{
        sp = 1
      }
      if (sp == 1) {
        $("<input />").attr("type", "hidden")
            .attr("name", "size")
            .attr("value", size)
            .appendTo("#form1");
        return true;
      }
      else{
        return false;
      }
    });
</script>


{% endblock script %}